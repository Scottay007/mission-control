'use client';
import{useState}from'react';
const D=[{"code":"P0131","title":"O2 Sensor Low (B1S1)","desc":"Front O2 reading low voltage.","severity":"moderate","causes":["Faulty O2","Exhaust leak","Wiring damage"],"fixes":["Inspect wiring","Check gaskets","Replace sensor"]},{"code":"P0122","title":"TPS Circuit Low","desc":"Throttle position sensor low.","severity":"high","causes":["Faulty TPS","Loose connector"],"fixes":["Inspect connector","Measure voltage","Replace TPS"]},{"code":"P0562","title":"System Voltage Low","desc":"Battery below 10V.","severity":"moderate","causes":["Weak battery","Bad regulator"],"fixes":["Load test","Clean terminals","Test charging"]},{"code":"P1353","title":"Front Cylinder Misfire","desc":"Front cyl not firing.","severity":"high","causes":["Fouled plug","Weak coil"],"fixes":["Replace plug","Swap coils"]},{"code":"P2135","title":"TPS Correlation","desc":"TPS1/TPS2 mismatch.","severity":"high","causes":["Throttle body","Wiring"],"fixes":["Check both TPS","Replace if needed"]},{"code":"P0505","title":"IAC Malfunction","desc":"Idle air control issue.","severity":"moderate","causes":["Dirty IAC","Vacuum leak"],"fixes":["Clean IAC","Check leaks"]},{"code":"U1300","title":"CAN Bus Error","desc":"Communication fault.","severity":"low","causes":["Aftermarket wiring","Corrosion"],"fixes":["Remove accessories","Check connectors"]},{"code":"P0118","title":"ECT High","desc":"Coolant temp reading high.","severity":"moderate","causes":["Faulty sensor","Overheating"],"fixes":["Test resistance","Replace sensor"]},{"code":"P1510","title":"Limp Mode","desc":"ECM limited performance.","severity":"high","causes":["Multiple faults"],"fixes":["Fix other DTCs first"]},{"code":"B1153","title":"TSM Fault","desc":"Security module error.","severity":"low","causes":["Low battery","Key fob"],"fixes":["Check battery","Try spare key"]}];
export default function HDDTC(){const[s,setS]=useState('');const[x,setX]=useState(null);const f=D.filter(d=>!s||(d.code||'').toLowerCase().includes(s.toLowerCase())||d.title.toLowerCase().includes(s.toLowerCase())||d.desc.toLowerCase().includes(s.toLowerCase()));return(<div className="min-h-screen bg-background"><header className="border-b border-border px-4 py-3"><div className="max-w-4xl mx-auto flex items-center gap-3"><a href="/harley" className="text-text-muted hover:text-text-primary text-sm">\u2190 Harley</a><span className="text-border">|</span><h1 className="font-bold" style={{color:'#E8720E'}}>ðŸ”§ DTC Codes</h1></div></header><div className="max-w-4xl mx-auto px-4 py-8"><h2 className="text-2xl font-bold mb-6">DTC Codes</h2><p className="text-text-muted text-sm mb-4">Search Harley diagnostic trouble codes.</p><input type="text" value={s} onChange={e=>setS(e.target.value)} placeholder="Search P0131..." className="mc-input mb-6"/><div className="space-y-3">{f.map((d,i)=>(<div key={i} className="mc-card overflow-hidden"><button onClick={()=>setX(x===i?null:i)} className="w-full p-4 text-left hover:bg-background/50"><div className="flex items-start gap-4">{d.code&&<div className="font-mono font-bold text-lg w-20" style={{color:'#E8720E'}}>{d.code}</div>}<div className="flex-1"><h3 className="font-semibold mb-1">{d.title}</h3><p className="text-text-muted text-sm">{d.desc}</p></div>{d.severity&&<span className="text-xs font-bold px-2 py-1 rounded" style={{backgroundColor:d.severity==='high'?'rgba(239,68,68,.15)':d.severity==='moderate'?'rgba(245,158,11,.15)':'rgba(34,197,94,.15)',color:d.severity==='high'?'#EF4444':d.severity==='moderate'?'#F59E0B':'#22C55E'}}>{d.severity}</span>}</div></button>{x===i&&<div className="border-t border-border p-4 bg-surface/50"><p className="text-text-secondary text-sm mb-3">{d.desc}</p>{d.causes&&<div className="grid grid-cols-1 md:grid-cols-2 gap-4"><div><h4 className="font-bold text-sm mb-2 text-danger">Causes</h4>{d.causes.map((c,j)=><p key={j} className="text-sm text-text-muted">\u2022 {c}</p>)}</div>{d.fixes&&<div><h4 className="font-bold text-sm mb-2 text-ebike">Fixes</h4>{d.fixes.map((f,j)=><p key={j} className="text-sm text-text-muted">{j+1}. {f}</p>)}</div>}</div>}<div className="mt-3 pt-3 border-t border-border"><a href="/ai-chat" className="text-sm hover:underline" style={{color:'#E8720E'}}>\ud83e\udd16 Ask AI \u2192</a></div></div>}</div>))}</div></div></div>);}