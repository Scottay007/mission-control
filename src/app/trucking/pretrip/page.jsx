'use client';
import { useState } from 'react';

const S = [
  { title: "Engine", items: ["Oil level", "Coolant", "Belts/hoses", "Air compressor", "Wiring"] },
  { title: "Cab", items: ["Mirrors", "Windshield", "Wipers", "Horn", "Parking brake", "Seat belt", "Gauges", "Emergency equip"] },
  { title: "Exterior", items: ["Headlights", "Turn signals", "Taillights", "Brake lights", "Tires", "Lug nuts", "Mud flaps"] },
  { title: "Coupling", items: ["Fifth wheel", "Kingpin locked", "Air lines", "Electrical cord", "Landing gear raised"] },
  { title: "Brakes", items: ["Air builds 120-145", "Low warn 60 PSI", "Springs below 45", "Service brakes OK", "Park brake holds", "Leak rate OK"] }
];

export default function PreTrip() {
  const [ch, setCh] = useState(new Set());

  const tog = (id) => {
    setCh((p) => {
      const n = new Set(p);
      if (n.has(id)) { n.delete(id); } else { n.add(id); }
      return n;
    });
  };

  const tot = S.reduce((s, x) => s + x.items.length, 0);
  const pct = Math.round(ch.size / tot * 100);

  return (
    <div className="min-h-screen bg-background">
      <header className="border-b border-border px-4 py-3">
        <div className="max-w-4xl mx-auto flex items-center gap-3">
          <a href="/trucking" className="text-text-muted hover:text-text-primary text-sm">
            ← Trucking
          </a>
          <span className="text-border">|</span>
          <h1 className="font-bold" style={{ color: '#FF6F00' }}>
            ✅ Pre-Trip Inspection
          </h1>
        </div>
      </header>
      <div className="max-w-4xl mx-auto px-4 py-8">
        <div className="flex justify-between mb-6">
          <div>
            <h2 className="text-2xl font-bold">Pre-Trip Inspection</h2>
            <p className="text-text-muted text-sm">DOT-compliant checklist.</p>
          </div>
          <div className="text-2xl font-bold" style={{ color: '#FF6F00' }}>{pct}%</div>
        </div>
        <div className="h-2 bg-surface rounded-full mb-8">
          <div className="h-full rounded-full" style={{ width: pct + '%', backgroundColor: '#FF6F00' }} />
        </div>
        {S.map((sec, si) => (
          <div key={si} className="mc-card p-4 mb-4">
            <h3 className="font-bold mb-3" style={{ color: '#FF6F00' }}>{sec.title}</h3>
            {sec.items.map((item, ii) => {
              const id = si + '-' + ii;
              return (
                <button
                  key={id}
                  onClick={() => tog(id)}
                  className="flex items-center gap-3 w-full text-left p-2 rounded hover:bg-background/50"
                >
                  <div className={'w-5 h-5 rounded border-2 flex items-center justify-center ' + (ch.has(id) ? 'border-green-500 bg-green-500' : 'border-border')}>
                    {ch.has(id) && <span className="text-white text-xs">✓</span>}
                  </div>
                  <span className={'text-sm ' + (ch.has(id) ? 'line-through text-text-dim' : 'text-text-secondary')}>
                    {item}
                  </span>
                </button>
              );
            })}
          </div>
        ))}
        {pct === 100 && (
          <div className="mc-card p-6 text-center border-green-500/30">
            <p className="text-green-500 font-bold">✅ Complete!</p>
          </div>
        )}
      </div>
    </div>
  );
}