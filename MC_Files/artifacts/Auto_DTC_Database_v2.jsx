'use client';
import{useState}from'react';
const D=[{"code":"P0420","title":"Catalyst Efficiency Low","desc":"Cat converter not efficient.","severity":"moderate","causes":["Worn cat","Bad O2 sensor","Exhaust leak"],"fixes":["Check leaks","Test O2","Replace cat"]},{"code":"P0300","title":"Random Misfire","desc":"Multiple cylinder misfires.","severity":"high","causes":["Worn plugs","Bad coils","Vacuum leak"],"fixes":["Replace plugs","Test coils","Check leaks"]},{"code":"P0171","title":"System Too Lean B1","desc":"Engine running lean.","severity":"moderate","causes":["Vacuum leak","Weak fuel pump","Dirty MAF"],"fixes":["Smoke test","Clean MAF","Fuel pressure test"]},{"code":"P0442","title":"EVAP Small Leak","desc":"Often just a loose gas cap.","severity":"low","causes":["Loose cap","Cracked hose"],"fixes":["Tighten cap","Smoke test"]},{"code":"P0128","title":"Coolant Below Temp","desc":"Engine slow to warm.","severity":"moderate","causes":["Stuck thermostat","Bad ECT sensor"],"fixes":["Replace thermostat","Test sensor"]},{"code":"P0455","title":"EVAP Large Leak","desc":"Significant EVAP leak.","severity":"moderate","causes":["Missing cap","Major hose issue"],"fixes":["Check cap","Smoke test"]}];
export default function AutoDTC(){const[s,setS]=useState('');const[x,setX]=useState(null);const f=D.filter(d=>!s||(d.code||'').toLowerCase().includes(s.toLowerCase())||d.title.toLowerCase().includes(s.toLowerCase())||d.desc.toLowerCase().includes(s.toLowerCase()));return(<div className="min-h-screen bg-background"><header className="border-b border-border px-4 py-3"><div className="max-w-4xl mx-auto flex items-center gap-3"><a href="/auto" className="text-text-muted hover:text-text-primary text-sm">\u2190 Auto</a><span className="text-border">|</span><h1 className="font-bold" style={{color:'#8B5CF6'}}>ðŸ”§ OBD-II Codes</h1></div></header><div className="max-w-4xl mx-auto px-4 py-8"><h2 className="text-2xl font-bold mb-6">OBD-II Codes</h2><p className="text-text-muted text-sm mb-4">Search OBD-II diagnostic trouble codes.</p><input type="text" value={s} onChange={e=>setS(e.target.value)} placeholder="Search P0420..." className="mc-input mb-6"/><div className="space-y-3">{f.map((d,i)=>(<div key={i} className="mc-card overflow-hidden"><button onClick={()=>setX(x===i?null:i)} className="w-full p-4 text-left hover:bg-background/50"><div className="flex items-start gap-4">{d.code&&<div className="font-mono font-bold text-lg w-20" style={{color:'#8B5CF6'}}>{d.code}</div>}<div className="flex-1"><h3 className="font-semibold mb-1">{d.title}</h3><p className="text-text-muted text-sm">{d.desc}</p></div>{d.severity&&<span className="text-xs font-bold px-2 py-1 rounded" style={{backgroundColor:d.severity==='high'?'rgba(239,68,68,.15)':d.severity==='moderate'?'rgba(245,158,11,.15)':'rgba(34,197,94,.15)',color:d.severity==='high'?'#EF4444':d.severity==='moderate'?'#F59E0B':'#22C55E'}}>{d.severity}</span>}</div></button>{x===i&&<div className="border-t border-border p-4 bg-surface/50"><p className="text-text-secondary text-sm mb-3">{d.desc}</p>{d.causes&&<div className="grid grid-cols-1 md:grid-cols-2 gap-4"><div><h4 className="font-bold text-sm mb-2 text-danger">Causes</h4>{d.causes.map((c,j)=><p key={j} className="text-sm text-text-muted">\u2022 {c}</p>)}</div>{d.fixes&&<div><h4 className="font-bold text-sm mb-2 text-ebike">Fixes</h4>{d.fixes.map((f,j)=><p key={j} className="text-sm text-text-muted">{j+1}. {f}</p>)}</div>}</div>}<div className="mt-3 pt-3 border-t border-border"><a href="/ai-chat" className="text-sm hover:underline" style={{color:'#8B5CF6'}}>\ud83e\udd16 Ask AI \u2192</a></div></div>}</div>))}</div></div></div>);}